= Writing Internet-Drafts and RFCs in AsciiDoc
:source-highlighter: coderay
:icons: font

asciidoctor-rfc lets you write Internet-Drafts and RFCs in AsciiDoc, the
"`http://asciidoctor.org/[asciidoctor]-way`".

image:https://img.shields.io/gem/v/asciidoctor-rfc.svg["Gem Version", link="https://rubygems.org/gems/asciidoctor-rfc"]
image:https://img.shields.io/travis/riboseinc/asciidoctor-rfc/master.svg["Build Status", link="https://travis-ci.org/riboseinc/asciidoctor-rfc"]
image:https://codeclimate.com/github/riboseinc/asciidoctor-rfc/badges/gpa.svg["Code Climate", link="https://codeclimate.com/github/riboseinc/asciidoctor-rfc"]


== Introduction

The "`xml2rfc`" Vocabulary (hereinafter "`RFC XML`") is an XML-based language
used for writing
https://www.ietf.org/id-info/guidelines.html[Internet-Drafts]
and https://tools.ietf.org/html/rfc7322[RFCs (RFC7322)].

This gem allows you to author these types of documents in AsciiDoc, and outputs
RFC XML output in both v3 and v2 formats:

* v3 RFC XML (https://tools.ietf.org/html/rfc7991[RFC 7991])
* v2 RFC XML (https://tools.ietf.org/html/rfc7749[RFC 7749])

Its syntax is designed to be "`native-asciidoctor`":


== Installation

Add this line to your application's Gemfile:

[source,ruby]
----
gem "asciidoctor-rfc"
----

And then execute:

[source,console]
----
$ bundle
----

Or install it yourself as:

[source,console]
----
$ gem install asciidoctor-rfc
----


== Quick Start

[source,asciidoc]
----
= My first document using asciidoctor-rfc
:doctype: internet-draft // or rfc
----


== Usage

Converting your AsciiDoc to RFC XML is a simple as running the
`./bin/asciidoctor-rfc` script using Ruby and passing our
AsciiDoc document file as the first argument.

[source,console]
----
$ ruby ./bin/asciidoctor-rfc3 draft-example-00.adoc  # RFC XML v3 output
$ ruby ./bin/asciidoctor-rfc2 draft-example-00.adoc  # RFC XML v2 output
## WIP: bundle exec asciidoctor -b asciidoctor-rfc3 draft-example-00.adoc # RFC XML v3 output
## WIP: bundle exec asciidoctor -b asciidoctor-rfc2 draft-example-00.adoc # RFC XML v2 output
----

When the script completes, you should see the RFC XML file `draft-example-00.xml` in the
same directory.


== Syntax

The converter follows native AsciiDoc/asciidoctor syntax as much as possible,
including built-in attributes and styles.

Extension commands are provided to fully support writing an Internet-Draft/RFC
in AsciiDoc/asciidoctor syntax.

=== Document Type: `rfc` or `internet-draft` (Mandatory)

Set the `doctype` attribute to set status of this document:

`:doctype: internet-draft` sets the document as an Internet-Draft (default value):

* `rfc/front/seriesInfo@name` attribute will be set to `Internet-Draft` (in v3)
* `rfc/front/seriesInfo@value` will be set to the `:name:` attribute, stripping any file suffixes, but including any draft number; e.g. `draft-ietf-somewg-someprotocol-07` (in v3)
* `rfc@docName` will be set to the `:name:` attribute (in v2)

`:doctype: rfc` sets the document as an RFC:

* `rfc/front/seriesInfo@name` attribute will be set to `RFC` (in v3)
* `rfc/front/seriesInfo@value` will be set to the `:name:` attribute, stripping the initial `rfc-` prefix and any file suffixes (in v3)
* `rfc@number` will be set to the `:name:` attribute (in v2)


=== Gem Options

[cols="2", options="header"]
|===

| Attribute
| Purpose

|`:no-rfc-bold-bcp14:`
| Optional. Default value `true`. Allowed values: `true`, `false`.
Override default assumption that boldface uppercase BCP14 word is to be rendered with `bcp14` tag.

|===


=== Basic Document Attributes

`asciidoctor-rfc` allows setting the RFC XML document header using the following
document attributes. Complying with AsciiDoc syntax, no blank lines are
permitted between the title, listing of authors, and the document attributes.

Shared RFC XML v3/v2 syntax:

[cols="3", options="header"]
|===

| Attribute
| Purpose
| RFC XML v2/v3 element

| `= Document Title`
| Mandatory. Title of document.
| `rfc/front/title`

| `:abbrev:`
| Mandatory. Abbreviation of document title. Usually the document name without
the keyword `draft-`.
| `rfc/front/title@abbrev`

| `:ipr:`
| Mandatory. IP status of document. See
https://tools.ietf.org/html/rfc7991#section-2.45.5[here]. Defaults to
`trust200902`.
| `rfc@ipr`

| `:ipr-extract:`
| Optional. Identifies a section that can be extracted from text. See
https://tools.ietf.org/html/rfc7991#section-2.45.6[here].
| `rfc@iprExtract`

| `:obsoletes:`
| Optional. A comma-separated list of RFC numbers or Internet-Draft names that
this document obsoletes. Delimited by `comma + space`.
| `rfc@obsoletes`

| `:updates:`
| Optional. A comma-separated list of RFC numbers or Internet-Draft names that
this document updates. Delimited by `comma + space`.
| `rfc@updates`

| `:submission-type:`
| Optional. Document stream of document described in
https://tools.ietf.org/html/rfc7841[RFC7841]. Allowed values: `IETF` (default),
`independent`, `IAB`, and `IRTF`.
| `rfc@submissionType`

| `:revdate:`
| Optional. Latest revision date of document. Default value is current time.
Accepts ISO 8601 date. For consistency with AsciiDoc, `:revdate:` is given as
an ISO 8601 date; the converter breaks it down into day, month name and year
| `front/date@day`, `front/date@month`, `front/date@year`

| `:area:`
| Optional. Comma delimited text on which IETF area this document relates to. Value should
"be either the full name or the abbreviation of one of the IETF areas as
listed on <http://www.ietf.org/iesg/area.html>". See
https://tools.ietf.org/html/rfc7991#section-2.4[here].
| `front/area`

| `:workgroup:`
| Optional. Comma delimited text on which IETF workgroup or research group this
document originates from. See https://tools.ietf.org/html/rfc7991#section-2.65[here].
| `front/workgroup`

| `:keyword:`
| Optional. Comma delimited text for singular keywords used for RFC index and
metadata.
| `front/keyword`

|===


=== Document Name / Number (Mandatory)

The `name` attribute sets the document's name. This should be a number if
the document is an RFC, and a name (in the form of `draft-ietf-somewg-someprotocol-07`)
if it is an Internet-Draft.

When `doctype` is set to:

* `internet-draft`: the value should be in the form `draft-ietf-somewg-someprotocol-07`.
** v3: the `front/seriesInfo@value` will be set to this value.
** v2: the `rfc@docName` will be set to this value.

* `rfc`: the value should be a number like `7991` as described
  https://tools.ietf.org/html/rfc7991#section-2.47.6[here]
** v3: the `front/seriesInfo@value` will be set to this value.
** v2: the `rfc@number` will be set to this value.


=== Document Status

Set the `status` attribute to set the current status of this document.

The following values are allowed: `standard`, `informational`, `experimental`, `bcp`, `fyi`, `full-standard`.

* In v3, this sets the first `front/seriesInfo` element with `@status` as one
  of those values to indicate this.
* In v2, this sets the `front@category` value to one of `std`, `bcp`, `info`, `exp`, `historic`.


=== Intended Series

Set the `intended-series` attribute to set the intended series of this
document.

The following values are allowed: `standard`, `informational`, `experimental`, `bcp`, `fyi`, `full-standard`. 

When `doctype` is set to:

* `internet-draft`: this value can be one of `standard`, `full-standard`, `bcp`, `fyi`, `informational`,
  `experimental`, or `historic` to indicate the intended series once the document is published as an RFC.

** In v3, this sets a second `front/seriesInfo` element with `@status` as one of those values, and an empty `@name`, to indicate this.
** In v2, this sets the `front@category` value to one of `std`, `bcp`, `info`, `exp`, `historic`.

* `rfc`: this value can be either:
** one of `full-standard`, `bcp` or `fyi`, to indicate the current status of this document, followed by the number of the document within the series; e.g. `full-standard 1234`, `bcp 14`.
** `exp`, `info`, or `historic`. (`experimental` and `informational` will be accepted by the gem as synonyms.)

** In v3, this sets a second `front/seriesInfo` element with `@status` as one of those values, and an empty `@name`, to indicate this.
** In v2, this sets the `front@category` value to one of `std`, `bcp`, `info`. (While in https://tools.ietf.org/html/rfc7749#appendix-A.1[v2], the values `exp`, `historic` are also possible for a RFC, our gem does not support it.)

=== Document Submission Type / Stream

Set document submission type via the `submission-type` document attribute.

The following values are allowed: `IETF` (default), `independent`, `IAB`, and `IRTF`.

* In v3, the `rfc@submissionType` and `rfc/front/seriesInfo@stream` attributes are set to this value.
* In v2, the `rfc@submissionType` is set to this value

=== Document Consensus

Set document consensus type via the `consensus` document attribute.

These values are accepted: `false`, `true`.

* In v3, this is the value set for the `rfc@consensus` attribute.
* In v2, this is the value set for the `rfc@consensus` attribute, but `false` is written as `no` and `true` is written as `yes`.


=== Document Language

Set the document language using the `xml-lang` document attribute.

By default this is `en`.

* In v3 and v2, this is the value set for the `rfc@xml:lang` attribute.

While v3 supports marking specific elements with their own `xml:lang` attribute, this is not yet supported by our gem.


=== Document Attributes for v3 only

These attributes are only supported for the v3 converter.

[cols="3", options="header"]
|===

| Attribute
| Purpose
| RFC XML v3 element

|`:index-include:`
| Optional. Defaults to `true`. Values: `true` or `false`. Specifies whether
formatter should include an index in generated files. If the source file has no
`<iref>` elements, an index is never generated.
| `rfc@indexInclude`

|`:sort-refs:`
| Optional. Defaults to `false`. Values: `true` or `false`. Specifies whether
the prep tool should sort references.
| `rfc@sortRefs`

|`:sym-refs:`
| Optional. Defaults to `true`. Values: `true` or `false`. Specifies whether
formatter should use symbolic references (such as "`[RFC2119]`") or not
(such as "`[3]`").
| `rfc@symRefs`

|`:toc-include:`
| Optional. Defaults to `true`. Values: `true` or `false`. Specifies whether
formatter should contain a table of contents.
| `rfc@tocInclude`

| `:link{_i}: _URL_` or `:link{_i}: _URL_ _REL_`
a| Optional. A link to an external document related to this document.

There are 4 types of values:

. (RFC only) ISSN for this RFC document (`rel` set to `item`, `link` value in
  form of `urn:issn:`;
. (RFC only) DOI for this RFC document (`rel` set to `describedBy`, `link`
  value in form specified by https://tools.ietf.org/html/rfc7669[RFC7669];
. (Final Draft) Internet-Draft submitted to become published RFC (`rel` set to
  `convertedFrom`, `link` value set to "IETF-controlled web site that retains
  copies of Internet-Drafts";
. (Any status) ISSN (`rel` set to `alternate`, `link` value as any author run web site.
| `front/link@href = _URL_` or/ with `front/link@rel = _REL_`

|===

////
TODO: I don't think this is used?
|`:series-no:` | rfc@seriesNo | |
////


=== Author Attributes

In an Internet-Draft/RFC, detailed information of an author is necessary, which
is not supported by the normal AsciiDoc syntax.

You will need to provide the following information.


==== Multiple Author Names

// TODO: Note that an author could simply be an "Organization" without the names.
// https://tools.ietf.org/html/rfc7991#section-2.7

Just like a normal AsciiDoc, provide this (sample of 3 authors):

[source,asciidoc]
----
firstname middlename(s) lastname <email>; firstname middlename(s) lastname <email>; firstname middlename(s) lastname <email>
----

These will be mapped as follows:

[cols="3", options="header"]
|===

| Syntax
| Purpose
| RFC XML v3/v2 element

| `firstname middlename(s) lastname`
| Mandatory (at least one). Author's full name.
| `front/author@fullname`

| `lastname`
| Author's last name.
| `front/author@surname`

| `email`
| Author's email address.
| `front/author/address/email`

|===


==== Author Attributes

In `asciidoctor-rfc`, detailed author attributes are given as document
attributes.

As multiple authors can be specified, the document attribute to specify the
first author uses a name `:role`, and the second onwards `:role_2`, etc.

Shared RFC XML v3/v2 syntax:

[cols="3", options="header"]
|===

| Attribute
| Purpose
| RFC XML v3/v2 element

| `:fullname{_i}:`
| Optional. Author's full name. Can set here instead of document header's "`Author`" line.
| `front/author@fullname`

| `:forename_initials{_i}:`
| Optional. Author's initials excluding surname. Defaults to dynamically
calculated initials. Distinct from the AsciiDoc `:initials:` attribute, which
includes surname.
| `front/author@initials`

| `:lastname{_i}:`
| Optional. Author's last name. Can set here instead of document header's "`Author`" line.
| `front/author@surname`

| `:role{_i}:`
| Optional. Defaults to `author`. Possible values: `author`, `editor`.
| `front/author@role`

| `:organization{_i}:`
| Optional. Defaults to `""`. Author's organization affiliation.
| `front/author/organization`

| `:organization_abbrev{_i}:`
| Optional. Defaults to `""`. Author's organization's abbreviation shown .
| `front/author/organization@abbrev`

|===


===== Author Address

[cols="3", options="header"]
|===
| Attribute
| Purpose
| RFC XML v2/v3 element

| `:email{_i}:`
| Email of author.
| `front/author/address/email`

| `:fax{_i}:`
| Fax number of author. Deprecated in v3.
| `front/author/address/facsimile`

| `:uri{_i}:`
| URI of author.
| `front/author/address/uri`

| `:phone{_i}:`
| Author's phone number. Scheme-specific part of a `tel` URI (does not include
the prefix `tel:`).
See https://tools.ietf.org/html/rfc3966#section-3[RFC3966 `global-number-digits`].
| `front/author/address/phone`

| `:street{_i}:`
| Address of author, non-city/region/code/country portion.
Multiple lines concatenated with `"\ "` will be split into separate `<street>`
elements.
| `front/author/address/postal/street`

| `:city{_i}:`
| City portion of author's address
| `front/author/address/postal/city`

| `:region{_i}:`
| Region, state or province portion of author's address. For US/CA the 2-digit state code.
| `front/author/address/postal/region`

| `:country{_i}:`
| Country of author's address
| `front/author/address/postal/country`

| `:code{_i}:`
| Postal code of author's address
| `front/author/address/postal/code`
|===


Only available for RFC XML v3:

|===
| Attribute | Purpose | RFC XML v3 element
| `:postal-line{_i}:`
| For those who want to directly format their postal addresses without regard
to the prior types. Ignored in v2. Multiple lines are concatenated with `"\ "`.
The `postal-line` attribute is mutually exclusive with the presence of `street`,
`city`, `region`, `country` and `code` attributes.
| `front/author/address/postal/postalLine`
|===


Example. This source:

[source,asciidoc]
----
:street: 57 Mt Pleasant St\ Technology Park
:city: Dullsville
:region: NSW
:country: Australia
:code: 3333
----

Produces:

[source,xml]
----
<address>
  <postal>
    <street>57 Mt Pleasant St</street>
    <street>Technology Park</street>
    <city>Dullsville</city>
    <region>NSW</region>
    <code>3333</code>
    <country>Australia</country>
  </postal>
</address>
----


=== Abstract

Any paragraphs following the document header are treated as the abstract
(`front/abstract`), whether or not they are in abstract style. The abstract is
terminated by either the first section header (which ends the document
preamble), or an admonition (e.g. `note`).

Any admonitions before the first section header are treated as notes (`front/note`).

[source,asciidoc]
----
[[abstract-id]] <1>
[abstract]
This is an abstract <2>

NOTE: This is a note <3>

[NOTE,remove-in-rfc=true] <4>
.Note 2 Title <5>
===
This is another note <3>
===
----
<1> v3 only: `front/abstract@anchor` (attribute only available in v3)
<2> `front/abstract`
<3> `front/note`
<4> v3 only: `front/note@removeInRFC` (attribute only available in v3)
<5> v3: `front/note/name`; v2: `front/note@title`


=== Sections and Subsections

[source,asciidoc]
----
:sectnums: <1>
[[id]] <2>
[remove-in-rfc=true,toc=include|exclude|default] <3>
== Section title <4>
First paragraph of section <5>

Second paragraph of section <5>

:sectnums!: <6>
=== Subsection title <7>
First paragraph of subsection <8>

==== Subsubsection title <9>
Content content content <10>
----
<1> `middle/section@numbered=true` (attribute only available in v3)
<2> `middle/section@anchor`
<3> v3 only: `middle/section@removeInRFC`, `middle/section@toc` (attributes only available in v3)
<4> v3: `middle/section/name`; v2: `middle/section@title`
<5> `middle/section/t`
<6> `middle/section@numbered=false` (attribute only available in v3) (toggle)
<7> v3: `middle/section/section/name`; v2: `middle/section/section@title`
<8> `middle/section/section/t`
<9> v3: `middle/section/section/section/name`; v2: `middle/section/section/section@title`
<10> `middle/section/section/section/t`


=== Cross-References

[source,asciidoc]
----
Content content content
<<crossreference>> <1>
<<crossreference,text>> <2>
<<crossreference,format=(counter|title|none|default): text>> <3>
http://example.com/[linktext] <4>
The following represent the v3 relref element
<<crossreference,section_number (of|comma|parens|bare)>> <5>
<<crossreference,section_number (of|comma|parens|bare): text>> <6>
<<crossreference#fragment,section_number (of|comma|parens|bare)>> <7>
<<crossreference#fragment,section_number (of|comma|parens|bare): text>> <8>
----
<1> `<xref target="crossreference"/>`
<2> `<xref target="crossreference">text</xref>`
<3> `<xref format="counter|title|none|default" target="crossreference">text</xref>`
<4> `<eref href="http://example.com/">linktext</eref>`
<5> v3 only: `<relref displayFormat="of|comma|parens|bare" section="section_number" target="crossreference"/>` (element only available in v3)
<6> v3 only: `<relref displayFormat="of|comma|parens|bare" section="section_number" target="crossreference">text</relref>` (element only available in v3)
<7> v3 only: `<relref relative="fragment" displayFormat="of|comma|parens|bare" section="section_number" target="crossreference"/>` (element only available in v3)
<8> v3 only: `<relref relative="fragment" displayFormat="of|comma|parens|bare" section="section_number" target="crossreference">text</relref>` (element only available in v3)


=== Indexing

[source,asciidoc]
--
This ((<indexterm>)) <1>
is visible in the text,
this one is not (((indexterm, index-subterm))). <2>
--
<1> `<iref item="indexterm">indexterm</iref>`
<2> `<iref item="indexterm" subitem="index-subterm"/>`


=== Inline formatting

[source,asciidoc]
--
Linebreak: + <1>
_Italic_ <2>
*Bold* <3>
`Monospace` <4>
~subscript~ <5>
^superscript^ <6>
[bcp14]#MUST NOT# <7>
*MUST NOT* <8>
--
<1> That is, "+ " at the end of a line. v3: `<br/>`; v2: `<vspace/>`.
<2> v3: `<em>Italic</em>`; v2: `<spanx style="emph">Italic</spanx>`
<3> v3: `<strong>Bold</strong>`; v2: `<spanx style="strong">Bold</spanx>`
<4> v3: `<tt>Monospace</tt>`; v2: `<spanx style="verb">Monospace</spanx>`
<5> v3 only: `<sub>subscript</sub>`. Not supported in v2; rendered as `\_subscript_`
<6> v3 only: `<sup>superscript</sup>`. Not supported in v2; rendered as `\^superscript^`
<7> v3 only: `<bcp14>MUST NOT</bcp14>`. Not supported in v2; rendered as `<spanx style="strong">MUST NOT</spanx>`.
<8> v3: if document flag `:no-rfc-bold-bcp14:` is present, then `<strong>MUST NOT</strong>`, else (by default) any BCP14/RFC2119 phrase in boldface and capitals is assumed to be intended to be tagged in `<bcp14>`. v2: `<spanx style="strong">MUST NOT</spanx>`.


=== Paragraphs

[source,asciidoc]
--
[[id]] <1>
[keep-with-next=true,keep-with-previous=true] <2>
Paragraph text <3>
--
<1> `t@anchor`
<2> v3 only: `t@keepWithNext`, `t@keepWithPrevious` (attributes only available in v3)
<3> `<t>Paragraph text</t>`

=== Quotes (v3 only)

[source,asciidoc]
--
[[id]] <1>
[quote, attribution, citation info] <2>
Quotation <3>
--
<1> `blockquote@anchor`
<2> `blockquote@quotedFrom`, `blockquote@cite`. In v3, `citation info` is limited to a URL.
<3> `<blockquote>Quotation</blockquote>`


=== Comments

[source,asciidoc]
--
NOTE: Any admonition inside the body of the text is a comment. <1>
// Note that actual AsciiDoc comments are ignored by the converter.

[[id]] <2>
[NOTE,display=true|false,source=name] <3>
.Note Title <4>
====
Any admonition inside the body of the text is a comment.
====
--
<1> `<cref>Any admonition inside the body of the text is a comment.</cref>`
<2> `cref@anchor`
<3> v3 only: `cref@display` (not supported in v2); v2: `cref@source`
<4> v3 only: `cref/name`


=== Source Code Listings

[source,asciidoc]
--
[[id]] <1>
.Source code listing title <2>
[source,type,src=uri,align,alt] <3>
----
begin() {
  source code listing <4>
}
----
--
<1> v3: `figure/sourcecode@anchor`; v2: `figure/artwork@anchor`
<2> v3: `figure/sourcecode@name`; v2: `figure/artwork@name`
<3> v3: `figure/sourcecode@type`; `figure/sourcecode@src` (`align` and `alt` not supported). If `src` is present, the listing is not expected to have any content: content is taken from the hyperlink in the attribute. v2: `figure/artwork@type`, `figure/artwork@src`, `figure/artwork@align`, `figure/artwork@alt`.
<4> v3: `figure/sourcecode`; v2: `figure/artwork`


=== ASCII Art and Images

[source,asciidoc]
--
[[id]] <1>
[align,alt,suppress-title] <2>
.Figure 1 <3>
====
Preamble text <4>

[[id]] <5>
.Figure2.jpg <8>
[align=left|center|right,alt=alt_text,type] <6>
....
Figures are only permitted to contain listings (sourcecode), images (artwork),
or literal (artwork) <7>
....
[[id]] <5>
.Figure2.jpg <8>
[align=left|center|right,alt=alt_text,type] <9>
image::filename.jpg[alt_text,700,200] <10>

Postamble text <11>
====
--
<1> `figure@anchor`
<2> v2 only: `figure/artwork@align`, `figure/artwork@alt`, `figure@suppress-title` (attributes only available in v2)
<3> `figure/name`
<4> v2 only: `figure/preamble` (only available in v2)
<5> `figure/artwork@anchor`
<6> `figure/artwork@align`, `figure/artwork@alt`; `figure@type` (attribute only available in v2)
<7> `figure/artwork`
<8> `figure/artwork@name`
<9> `figure/artwork@align`, `figure/artwork@alt`; `figure/artwork@type` (only available in v2, intended to be a MIME type; v3: populated as either `svg` or `binary-art` depending on file suffix)
<10> `figure/artwork@src`, `figure/artwork@alt`, `figure/artwork@width` (deprecated in v3), `figure/artwork@height` (deprecated in v3)
<11> v2 only: `figure/postamble` (only available in v2)


=== Unordered and Ordered Lists

[source,asciidoc]
--
[[id]] <1>
[empty=true,spacing=normal|compact] <2>
* Unordered list 1 <3>
* Unordered list 2 <3>
** Nested list <4>

[[id]] <5>
[spacing=compact,start=n,group=n,arabic|loweralpha|upperralpha|lowerroman|upperroman] <6>
. A <7>
. B <7>
--
<1> v3: `ul@anchor`; attribute only available in v3
<2> v3: `ul@empty`, `ul@spacing`; attributes only available in v3
<3> v2: `list[@style="symbols"]/t`; v3: ul/li
<4> v2: `list[@style="symbols"]/t/list[@style="symbols"]/t`; v3: `ul/li/ul/li`
<5> v3: `ol@anchor`; attribute only available in v3
<6> v2: `list/start`, `list@style` (`empty` and `group` not available) v3: `ol@empty`, `ol@start`, `ol@group`, `ol@type`
<7> v2: `list/t`; v3: `ol/li`

Note that asciidoctor does not permit anchors on either list items: the anchors in the following are ignored.

[source,asciidoc]
--
* [[id1]] A

. [[id2]] A
--

=== Definition Lists

[source,asciidoc]
--
[[id]] <1>
[horizontal,compact,hang-indent=n] <2>
A:: B <3>
--
<1> v3 only: `dl@anchor` (attribute only available in v3)
<2> v3 only: `dl@hanging`, `dl@spacing` (attributes only available in v3); v2 only: `list@hangIndent` (attribute only available in v2). Note that the `compact` and `horizontal` attributes are mutually exclusive in AsciiDoc.
<3> v3: `dl/dt`, `dl/dd`; v2: `list[@style="hanging"]/t@hangText`, `list[@style="hanging"]/t`

Note that asciidoctor does not permit anchors on either definition list terms,
or definition list definitions: the anchors in the following are ignored.

[source,asciidoc]
--
[[id1]] A:: [[id2]]B
--

=== Tables

The converter respects the AsciiDoc (horizontal) align attributes of cells (v2,
v3) and `colspan`, `rowspan` attributes (v3).

[source,asciidoc]
--
[[id]] <1>
[suppress-title,align,style] <2>
.Table Title <3>
|===
|[[id]] head | head <4>

h|header cell | body cell <5>
| | [[id]] body cell <6>

|foot | foot <7>
|===
--
<1> v3: `table@anchor`; v2: `texttable@anchor`
<2> v2: `texttable@suppress-title`, `texttable@align`, `texttable@style` (attributes only available in v2)
<3> v3: `table/name`; v2: `texttable@title`
<4> v3: `table/thead/tr/td`; v2: `texttable/ttcol@id` (attribute only available in v2), `texttable/ttcol`
<5> v3: `table/tbody/tr/th`, `table/tbody/tr/td`; v2: `texttable/c`, `texttable/c`
<6> v3: `table/tbody/tr/td@anchor` (attribute only available in v3)
<7> v3: `table/tfoot/tr/td`; v2: `texttable/c`


=== Sidebar (v3 only)

[source,asciidoc]
--
[[id]] <1>
****
Sidebar <2>
****
--
<1> `aside@anchor`
<2> `<aside>Sidebar</aside>`


=== References

==== v3 References

This gem has limited support for the list presentation of references supported natively in Asciidoc. 
However, raw RFC XML markup is preferred for entering references for v3 RFC XML, and it is the only
method supported for v2 RFC XML.

[source,asciidoc]
--
[[id]] <1>
[bibliography]
== Normative References
* [[[crossref]]]  Reference1 <2>
* [[[crossref2,xreftext]]] Reference2 <3>

[[id]] <1>
[bibliography]
== Informative References
* [[[crossref3]]] <4>
** [[[crossref4]]] Reference4 <5>
** [[[crossref5]]] Reference5 <5>
--
<1> `back/references@anchor`
<2> `back/references/reference@anchor`, `back/references/reference/refcontent`
<3> `<displayreference target=crossreference to=xyz/>`
<4> `back/references/referencegroup@anchor`
<5> `back/references/referencegroup/reference/refcontent`

==== v2 and v3 References

References for v2 are expected to be provided in raw RFC XML v2 format, and references
for v3 are encouraged to be provided in raw RFC XML v3 format.

[source,asciidoc]
--
[[id]] <1>
[bibliography]
== Normative References
++++
(raw XML) <2>
++++

[[id]] <1>
[bibliography]
== Informative References
++++
(raw XML) <2>
++++
--
<1> `back/references@anchor`
<2> `back/references/reference`



=== Appendices

[source,asciidoc]
--
[[id]] <1>
[appendix]
== Appendix 1 <2>
Content <3>
--
<1> `back/section@anchor`
<2> v3: `back/section/name`; v2: `back/section@title`
<3> `back/section/t`




=== Unsupported RFC XML Elements

The following **RFC XML v3/v2** elements are not (yet) supported through
asciidoctor commands:

|===
| RFC XML element                  | RFC XML v3 | RFC XML v2
| `front/boilerplate`              | Not added  | N/A
| `iref@primary`                   | N          | N
| `reference/*` (and all children) | N/A        | N
| `reference/front`                | N          | N
| `reference/annotation`           | N          | N
| `reference@quote-title`          | N          | N/A
| `reference@target`               | N          | N
| `table/preamble`                 | Deprecated | N
| `table/postamble`                | Deprecated | N
| `artwork@width`                  | Only on images | Only on images
| `artwork@height`                 | Only on images | Only on images
|===

=== Unsupported Asciidoctor Features

These asciidoctor features are not supported in output of these formats:

|===
| asciidoctor feature | RFC XML v2 | RFC XML v3
| http://asciidoctor.org/docs/user-manual/#quote[Quote] | Rendered as normal paragraph | Supported
| http://asciidoctor.org/docs/user-manual/#quote[Quote]: Non-URL Citations 2+| Ignored
| http://asciidoctor.org/docs/user-manual/#verse[Verse] | Rendered as normal paragraph | Rendered as Quote
| http://asciidoctor.org/docs/user-manual/#sidebar[Sidebar] | Rendered as normal paragraph | Supported
| http://asciidoctor.org/docs/user-manual/#index-terms[Index Term] Tertiary 2+| Ignored
| List: http://asciidoctor.org/docs/user-manual/#numbering-styles[Ordered List numbering] `decimal`, `lowergreek` 2+| Treated as `arabic`
| http://asciidoctor.org/docs/user-manual/#callouts[Callouts] 2+| Ignored
| Formatting: http://asciidoctor.org/docs/user-manual/#discrete-headings[Floating Title] 2+| Rendered as strong paragraph
| Formatting: http://asciidoctor.org/docs/user-manual/#page-break[Page Break] 2+| Ignored
| Formatting: http://asciidoctor.org/docs/user-manual/#horizontal-rules[Horizontal Rule] 2+| Ignored
| Media: http://asciidoctor.org/docs/user-manual/#audio[Audio] 2+| Ignored
| Media: http://asciidoctor.org/docs/user-manual/#video[Video] 2+| Ignored
| Media: http://asciidoctor.org/docs/user-manual/#images[Inline images] 2+| Ignored
| Macro: http://asciidoctor.org/docs/user-manual/#keyboard-shortcuts[Keyboard shortcuts] 2+| Ignored
| Macro: http://asciidoctor.org/docs/user-manual/#menu-selections[Menu selections] 2+| Ignored
| Macro: http://asciidoctor.org/docs/user-manual/#ui-buttons[UI buttons] 2+| Ignored
| Table: http://asciidoctor.org/docs/user-manual/#footer-row[Distinction between table body and table footer] | No | Supported
| Table: http://asciidoctor.org/docs/user-manual/#header-row[Multiple table header rows] | No | Supported
|===


== Examples

=== RFC XML v3 Example

ifdef::env-github[]
include::spec/examples/example-v3.adoc[]
endif::[]
ifndef::env-github[]
[source,asciidoc]
----
include::spec/examples/example-v3.adoc[]
----
endif::[]

=== RFC XML v2 Example

ifdef::env-github[]
include::spec/examples/example-v2.adoc[]
endif::[]
ifndef::env-github[]
[source,asciidoc]
----
include::spec/examples/example-v2.adoc[]
----
endif::[]


== Development

We follow Sandi Metz's Rules for this gem, you can read the
http://robots.thoughtbot.com/post/50655960596/sandi-metz-rules-for-developers[description of the rules here].

All new code should follow these
rules. If you make changes in a pre-existing file that violates these rules you
should fix the violations as part of your contribution.

=== Setup

Clone the repository.

[source,sh]
----
git clone https://github.com/riboseinc/asciidoctor-rfc
----

Setup your environment.

[source,sh]
----
bin/setup
----

Run the test suite

[source,sh]
----
bin/rspec
----

== Contributing

First, thank you for contributing! We love pull requests from everyone. By
participating in this project, you hereby grant https://www.ribose.com[Ribose Inc.] the
right to grant or transfer an unlimited number of non exclusive licenses or
sub-licenses to third parties, under the copyright covering the contribution
to use the contribution by all means.

Here are a few technical guidelines to follow:

. Open an https://github.com/riboseinc/asciidoctor-rfc/issues[issue] to discuss a new feature.
. Write tests to support your new feature.
. Make sure the entire test suite passes locally and on CI.
. Open a Pull Request.
. https://github.com/thoughtbot/guides/tree/master/protocol/git#write-a-feature[Squash your commits] after receiving feedback.
. Party!


== Credits

This gem is developed, maintained and funded by https://www.ribose.com[Ribose Inc.]
